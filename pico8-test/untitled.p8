pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	button = ""

	player = {
		sp = 2,
		pos_x = 63,
		pos_y = 63,
		forward = false
	}

	col_box = {
		sp = 13
	}
end

function _update()
	local dx, dy = 0, 0

	-- movements --
	if btn(➡️) then
		button = "right"
		dx = 1
		player.forward = false
	end

	if btn(⬅️) then
		button = "left"
		dx = -1
		player.forward = true
	end

	if btn(⬆️) then
		button = "up"
		dy = -1
	end

	if btn(⬇️) then
		button = "down"
		dy = 1
	end

	move_player(dx, dy)
end

function _draw()
	cls()
	map()
	spr(player.sp, player.pos_x, player.pos_y, 1, 1, player.forward)
	print(button)
end

function solid_at(mx, my)
	local tx = flr(mx / 8)
	local ty = flr(my / 8)
	local tile = mget(tx, ty)
	return fget(tile, 0)
end

function can_move_to(nx, ny)
	local x1, y1 = nx, ny
	local x2, y2 = nx + 7, ny + 7
	return not (solid_at(x1, y1)
				or solid_at(x1, y2)
				or solid_at(x2, y1)
				or solid_at(x2, y2))
end

function move_player(dx, dy)
	local nx = player.pos_x + dx
	local ny = player.pos_y + dy
	if can_move_to(nx, ny) then
		player.pos_x = nx
		player.pos_y = ny
	end
end

__gfx__
00000000022202200111011000000000000000000000000000000000000000000000000000000000000000000777777000000000dddddddd0000000000000000
00000000022222200111111000000000000000000000000000000000000000000000000000000000000000007777666600000000dddddddd0000000000000000
00700700222222221111111100000000000000000000000000000000000000000000000000000000000000007766666600000000dddddddd0000000000000000
000770000ffffff00ffffff000000000000000000000000000000000000000000000000000000000000000007766666600000000dddddddd0000000000000000
000770000f1ff1f00f0ff0f000000000000000000000000000000000000000000000000000000000000000007666666600000000dddddddd0000000000000000
007007000ffffff00ffffff000000000000000000000000000000000000000000000000000000000000000006666666600000000dddddddd0000000000000000
00000000002222000011110000000000000000000000000000000000000000000000000000000000000000006666666600000000dddddddd0000000000000000
00000000222222001111110000000000000000000000000000000000000000000000000000000000000000000666666000000000dddddddd0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005565555500000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555655500000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005655556500000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555565500000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b0000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b00000000001b0000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b00000000001b0000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000000000000000001b0000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b00000000001b0000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b00000000001b1b1b1b1b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b1b1b1b1b1b0000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b0000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b0000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b00000000000000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b000000001b0000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00010000070500505005050050500505006050080500b0500c0500f0501105016050180501c0502105025050280502c0502e0502f05030050310502e0502a050240501f0501b0501805015050140501305010050
